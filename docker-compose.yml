services:
  zerogravity:
    build: .
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
    ports:
      - "8741:8741"
      - "8742:8742"
    volumes:
      # Auto-read OAuth token from host's Antigravity config.
      # macOS: ~/Library/Application Support/Antigravity
      # Linux: ~/.config/Antigravity
      - ${HOME}/Library/Application Support/Antigravity:/root/.config/Antigravity:ro
    environment:
      # Don't set ZEROGRAVITY_TOKEN here â€” it freezes at container start.
      # The proxy reads state.vscdb from the mounted volume instead.
      # Use `zg-token` to inject a fresh token at runtime via POST /v1/token.
      - RUST_LOG=info
